{% extends 'base.html' %}

{% block title %}Search Results for "{{ query }}" - Django Blog{% endblock %}

{% block content %}
<div class="search-results-header">
    <h2>Search Results</h2>
    <p class="search-query">
        {% if query %}
            Found {{ posts.count }} result{{ posts.count|pluralize }} for "<strong>{{ query }}</strong>"
        {% else %}
            Please enter a search term.
        {% endif %}
    </p>
</div>

<div class="post-list">
    {% for post in posts %}
        <article class="post-card">
            <h2 class="post-title"><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h2>
            <div class="post-meta">
                <span class="post-author">By {{ post.author }}</span>
                <span class="post-date">on {{ post.published_date|date:"F d, Y" }}</span>
            </div>
            <div class="post-content-preview">
                {{ post.content|truncatewords:30 }}
            </div>
            
            {% if post.tags.all %}
            <div class="post-tags-list">
                {% for tag in post.tags.all %}
                <a href="{% url 'post-by-tag' tag.name %}" class="tag-badge">{{ tag.name }}</a>
                {% endfor %}
            </div>
            {% endif %}
            
            <a href="{% url 'post-detail' post.pk %}" class="btn btn-secondary mt-2">Read More</a>
        </article>
    {% empty %}
        <div class="no-results">
            <p>No posts found matching your query.</p>
            <a href="{% url 'home' %}" class="btn btn-primary">Back to Home</a>
        </div>
    {% endfor %}
</div>
{% endblock %}
